<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export>
    <version>6.4</version>
    <template_groups>
        <template_group>
            <uuid>a571c0d144b14fd4a87a9d9b2aa9fcd6</uuid>
            <name>Templates/Applications</name>
        </template_group>
    </template_groups>
    <templates>
        <template>
            <uuid>3cc8c9ae7055458c9a803597007f70bd</uuid>
            <template>Apache Tomcat by JMX2</template>
            <name>Apache Tomcat by JMX2</name>
            <description>The template to monitor Apache Tomcat by Zabbix that work without any external scripts.
The metrics are collected by JMX2.

You can discuss this template or leave feedback on our forum https://www.zabbix.com/forum/zabbix-suggestions-and-feedback/411862-discussion-thread-for-official-zabbix-template-tomcat

Generated by official Zabbix template tool &quot;Templator&quot;</description>
            <vendor>
                <name>Zabbix</name>
                <version>6.4-0</version>
            </vendor>
            <groups>
                <group>
                    <name>Templates/Applications</name>
                </group>
            </groups>
            <items>
                <item>
                    <uuid>7f6ec0e48d41456896799f487cd8243e</uuid>
                    <name>Tomcat: Version</name>
                    <type>JMX</type>
                    <key>jmx[&quot;Catalina:type=Server&quot;,serverInfo]</key>
                    <history>7d</history>
                    <trends>0</trends>
                    <value_type>CHAR</value_type>
                    <username>{$TOMCAT.USER}</username>
                    <password>{$TOMCAT.PASSWORD}</password>
                    <description>The version of the Tomcat.</description>
                    <preprocessing>
                        <step>
                            <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                            <parameters>
                                <parameter>1d</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>system</value>
                        </tag>
                    </tags>
                    <triggers>
                        <trigger>
                            <uuid>152d235652914aa2af78334385334214</uuid>
                            <expression>last(/Apache Tomcat by JMX/jmx[&quot;Catalina:type=Server&quot;,serverInfo],#1)&lt;&gt;last(/Apache Tomcat by JMX/jmx[&quot;Catalina:type=Server&quot;,serverInfo],#2) and length(last(/Apache Tomcat by JMX/jmx[&quot;Catalina:type=Server&quot;,serverInfo]))&gt;0</expression>
                            <name>Tomcat: Version has been changed</name>
                            <event_name>Tomcat: Version has changed (new version: {ITEM.VALUE})</event_name>
                            <priority>INFO</priority>
                            <description>The Tomcat version has changed. Acknowledge to close the problem manually.</description>
                            <manual_close>YES</manual_close>
                            <tags>
                                <tag>
                                    <tag>scope</tag>
                                    <value>notice</value>
                                </tag>
                            </tags>
                        </trigger>
                    </triggers>
                </item>
            </items>
            <discovery_rules>
                <discovery_rule>
                    <uuid>a478be537e5f48fe95310997d0df0eda</uuid>
                    <name>Protocol handlers discovery</name>
                    <type>JMX</type>
                    <key>jmx.discovery[attributes,&quot;Catalina:type=ProtocolHandler,port=*&quot;]</key>
                    <delay>1h</delay>
                    <username>{$TOMCAT.USER}</username>
                    <password>{$TOMCAT.PASSWORD}</password>
                    <filter>
                        <evaltype>AND</evaltype>
                        <conditions>
                            <condition>
                                <macro>{#JMXATTR}</macro>
                                <value>^name$</value>
                                <formulaid>A</formulaid>
                            </condition>
                        </conditions>
                    </filter>
                    <description>Discovery for ProtocolHandler</description>
                    <item_prototypes>
                        <item_prototype>
                            <uuid>830f58f8ad6640d989a70c01f7aa2ad8</uuid>
                            <name>{#JMXVALUE}: Gzip compression status</name>
                            <type>JMX</type>
                            <key>jmx[{#JMXOBJ},compression]</key>
                            <history>7d</history>
                            <trends>0</trends>
                            <value_type>CHAR</value_type>
                            <username>{$TOMCAT.USER}</username>
                            <password>{$TOMCAT.PASSWORD}</password>
                            <description>Gzip compression status on {#JMXNAME}. Enabling gzip compression may save server bandwidth.</description>
                            <preprocessing>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <parameters>
                                        <parameter>1h</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>protocol-handler</value>
                                </tag>
                                <tag>
                                    <tag>protocol-handler</tag>
                                    <value>{#JMXVALUE}</value>
                                </tag>
                            </tags>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <uuid>7d707de73a164f1db6b69e4dcb8c6ae9</uuid>
                                    <expression>find(/Apache Tomcat by JMX/jmx[{#JMXOBJ},compression],,&quot;like&quot;,&quot;off&quot;) = 1</expression>
                                    <name>{#JMXVALUE}: Gzip compression is disabled</name>
                                    <priority>INFO</priority>
                                    <description>gzip compression is disabled for connector {#JMXVALUE}.</description>
                                    <manual_close>YES</manual_close>
                                    <tags>
                                        <tag>
                                            <tag>scope</tag>
                                            <value>notice</value>
                                        </tag>
                                    </tags>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                    </item_prototypes>
                    <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                </discovery_rule>
                <discovery_rule>
                    <uuid>77175f79fe844bb8bca66de437a3ba32</uuid>
                    <name>Global request processors discovery</name>
                    <type>JMX</type>
                    <key>jmx.discovery[beans,&quot;Catalina:type=GlobalRequestProcessor,name=*&quot;]</key>
                    <delay>1h</delay>
                    <username>{$TOMCAT.USER}</username>
                    <password>{$TOMCAT.PASSWORD}</password>
                    <filter>
                        <evaltype>AND</evaltype>
                        <conditions>
                            <condition>
                                <macro>{#JMXNAME}</macro>
                                <value>{$TOMCAT.LLD.FILTER.MATCHES:&quot;GlobalRequestProcessor&quot;}</value>
                                <formulaid>A</formulaid>
                            </condition>
                            <condition>
                                <macro>{#JMXNAME}</macro>
                                <value>{$TOMCAT.LLD.FILTER.NOT_MATCHES:&quot;GlobalRequestProcessor&quot;}</value>
                                <operator>NOT_MATCHES_REGEX</operator>
                                <formulaid>B</formulaid>
                            </condition>
                        </conditions>
                    </filter>
                    <description>Discovery for GlobalRequestProcessor</description>
                    <item_prototypes>
                        <item_prototype>
                            <uuid>d7cb07f3f5e04792850332c416284dd9</uuid>
                            <name>{#JMXNAME}: Bytes received per second</name>
                            <type>JMX</type>
                            <key>jmx[{#JMXOBJ},bytesReceived]</key>
                            <history>7d</history>
                            <units>B</units>
                            <username>{$TOMCAT.USER}</username>
                            <password>{$TOMCAT.PASSWORD}</password>
                            <description>Bytes received rate by processor {#JMXNAME}</description>
                            <preprocessing>
                                <step>
                                    <type>CHANGE_PER_SECOND</type>
                                    <parameters>
                                        <parameter/>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>request</value>
                                </tag>
                                <tag>
                                    <tag>jmx-name</tag>
                                    <value>{#JMXNAME}</value>
                                </tag>
                                <tag>
                                    <tag>jmx-type</tag>
                                    <value>{#JMXTYPE}</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>abad7332ed6b417c92f6038ce12ae000</uuid>
                            <name>{#JMXNAME}: Bytes sent per second</name>
                            <type>JMX</type>
                            <key>jmx[{#JMXOBJ},bytesSent]</key>
                            <history>7d</history>
                            <units>B</units>
                            <username>{$TOMCAT.USER}</username>
                            <password>{$TOMCAT.PASSWORD}</password>
                            <description>Bytes sent rate by processor {#JMXNAME}</description>
                            <preprocessing>
                                <step>
                                    <type>CHANGE_PER_SECOND</type>
                                    <parameters>
                                        <parameter/>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>request</value>
                                </tag>
                                <tag>
                                    <tag>jmx-name</tag>
                                    <value>{#JMXNAME}</value>
                                </tag>
                                <tag>
                                    <tag>jmx-type</tag>
                                    <value>{#JMXTYPE}</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>1596a335401d47d6b2bde7a5b0de7b07</uuid>
                            <name>{#JMXNAME}: Errors per second</name>
                            <type>JMX</type>
                            <key>jmx[{#JMXOBJ},errorCount]</key>
                            <history>7d</history>
                            <username>{$TOMCAT.USER}</username>
                            <password>{$TOMCAT.PASSWORD}</password>
                            <description>Error rate of request processor {#JMXNAME}</description>
                            <preprocessing>
                                <step>
                                    <type>CHANGE_PER_SECOND</type>
                                    <parameters>
                                        <parameter/>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>request</value>
                                </tag>
                                <tag>
                                    <tag>jmx-name</tag>
                                    <value>{#JMXNAME}</value>
                                </tag>
                                <tag>
                                    <tag>jmx-type</tag>
                                    <value>{#JMXTYPE}</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>985d3eeacd9d404385bfcef693add39a</uuid>
                            <name>{#JMXNAME}: Requests processing time</name>
                            <type>JMX</type>
                            <key>jmx[{#JMXOBJ},processingTime]</key>
                            <history>7d</history>
                            <units>s</units>
                            <username>{$TOMCAT.USER}</username>
                            <password>{$TOMCAT.PASSWORD}</password>
                            <description>The total time to process all incoming requests of request processor
{#JMXNAME}</description>
                            <preprocessing>
                                <step>
                                    <type>MULTIPLIER</type>
                                    <parameters>
                                        <parameter>0.001</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>request</value>
                                </tag>
                                <tag>
                                    <tag>jmx-name</tag>
                                    <value>{#JMXNAME}</value>
                                </tag>
                                <tag>
                                    <tag>jmx-type</tag>
                                    <value>{#JMXTYPE}</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>8e0307b5063549dab118e0e374a62aad</uuid>
                            <name>{#JMXNAME}: Requests per second</name>
                            <type>JMX</type>
                            <key>jmx[{#JMXOBJ},requestCount]</key>
                            <history>7d</history>
                            <username>{$TOMCAT.USER}</username>
                            <password>{$TOMCAT.PASSWORD}</password>
                            <description>Rate of requests served by request processor {#JMXNAME}</description>
                            <preprocessing>
                                <step>
                                    <type>CHANGE_PER_SECOND</type>
                                    <parameters>
                                        <parameter/>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>request</value>
                                </tag>
                                <tag>
                                    <tag>jmx-name</tag>
                                    <value>{#JMXNAME}</value>
                                </tag>
                                <tag>
                                    <tag>jmx-type</tag>
                                    <value>{#JMXTYPE}</value>
                                </tag>
                            </tags>
                        </item_prototype>
                    </item_prototypes>
                    <graph_prototypes>
                        <graph_prototype>
                            <uuid>87de97d55baa4be1964652957a051fc2</uuid>
                            <name>{#JMXNAME}: Traffic</name>
                            <graph_items>
                                <graph_item>
                                    <drawtype>GRADIENT_LINE</drawtype>
                                    <color>199C0D</color>
                                    <item>
                                        <host>Apache Tomcat by JMX</host>
                                        <key>jmx[{#JMXOBJ},bytesSent]</key>
                                    </item>
                                </graph_item>
                                <graph_item>
                                    <sortorder>1</sortorder>
                                    <drawtype>GRADIENT_LINE</drawtype>
                                    <color>F63100</color>
                                    <item>
                                        <host>Apache Tomcat by JMX</host>
                                        <key>jmx[{#JMXOBJ},bytesReceived]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                    </graph_prototypes>
                    <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                </discovery_rule>
                <discovery_rule>
                    <uuid>cf1badf064714d9b9e3b7110696432f9</uuid>
                    <name>Contexts discovery</name>
                    <type>JMX</type>
                    <key>jmx.discovery[beans,&quot;Catalina:type=Manager,host=*,context=*&quot;]</key>
                    <delay>1h</delay>
                    <username>{$TOMCAT.USER}</username>
                    <password>{$TOMCAT.PASSWORD}</password>
                    <filter>
                        <evaltype>AND</evaltype>
                        <conditions>
                            <condition>
                                <macro>{#JMXHOST}</macro>
                                <value>{$TOMCAT.LLD.FILTER.MATCHES:&quot;Manager&quot;}</value>
                                <formulaid>A</formulaid>
                            </condition>
                            <condition>
                                <macro>{#JMXHOST}</macro>
                                <value>{$TOMCAT.LLD.FILTER.NOT_MATCHES:&quot;Manager&quot;}</value>
                                <operator>NOT_MATCHES_REGEX</operator>
                                <formulaid>B</formulaid>
                            </condition>
                        </conditions>
                    </filter>
                    <description>Discovery for contexts</description>
                    <item_prototypes>
                        <item_prototype>
                            <uuid>c20bb67db247471ba686d2ea371b7c73</uuid>
                            <name>{#JMXHOST}{#JMXCONTEXT}: Sessions active</name>
                            <type>JMX</type>
                            <key>jmx[{#JMXOBJ},activeSessions]</key>
                            <history>7d</history>
                            <username>{$TOMCAT.USER}</username>
                            <password>{$TOMCAT.PASSWORD}</password>
                            <description>Active sessions of the application.</description>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>context</value>
                                </tag>
                                <tag>
                                    <tag>jmx-context</tag>
                                    <value>{#JMXCONTEXT}</value>
                                </tag>
                                <tag>
                                    <tag>jmx-host</tag>
                                    <value>{#JMXHOST}</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>bc3c2a3cff614f3eaf001463df1b2364</uuid>
                            <name>{#JMXHOST}{#JMXCONTEXT}: Sessions allowed maximum</name>
                            <type>JMX</type>
                            <key>jmx[{#JMXOBJ},maxActiveSessions]</key>
                            <history>7d</history>
                            <value_type>FLOAT</value_type>
                            <username>{$TOMCAT.USER}</username>
                            <password>{$TOMCAT.PASSWORD}</password>
                            <description>The maximum number of active Sessions allowed, or -1 for no limit.</description>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>context</value>
                                </tag>
                                <tag>
                                    <tag>jmx-context</tag>
                                    <value>{#JMXCONTEXT}</value>
                                </tag>
                                <tag>
                                    <tag>jmx-host</tag>
                                    <value>{#JMXHOST}</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>fd8678e68cf440939af2dd8f3568a42f</uuid>
                            <name>{#JMXHOST}{#JMXCONTEXT}: Sessions active maximum so far</name>
                            <type>JMX</type>
                            <key>jmx[{#JMXOBJ},maxActive]</key>
                            <history>7d</history>
                            <username>{$TOMCAT.USER}</username>
                            <password>{$TOMCAT.PASSWORD}</password>
                            <description>Maximum number of active sessions so far.</description>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>context</value>
                                </tag>
                                <tag>
                                    <tag>jmx-context</tag>
                                    <value>{#JMXCONTEXT}</value>
                                </tag>
                                <tag>
                                    <tag>jmx-host</tag>
                                    <value>{#JMXHOST}</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>34702e2d6b2142ec9aa43bea1059a98a</uuid>
                            <name>{#JMXHOST}{#JMXCONTEXT}: Sessions rejected per second</name>
                            <type>JMX</type>
                            <key>jmx[{#JMXOBJ},rejectedSessions]</key>
                            <history>7d</history>
                            <username>{$TOMCAT.USER}</username>
                            <password>{$TOMCAT.PASSWORD}</password>
                            <description>Rate of sessions we rejected due to maxActive being reached.</description>
                            <preprocessing>
                                <step>
                                    <type>CHANGE_PER_SECOND</type>
                                    <parameters>
                                        <parameter/>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>context</value>
                                </tag>
                                <tag>
                                    <tag>jmx-context</tag>
                                    <value>{#JMXCONTEXT}</value>
                                </tag>
                                <tag>
                                    <tag>jmx-host</tag>
                                    <value>{#JMXHOST}</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>eb28f9bd99d440f4a50d1c24ae758029</uuid>
                            <name>{#JMXHOST}{#JMXCONTEXT}: Sessions created per second</name>
                            <type>JMX</type>
                            <key>jmx[{#JMXOBJ},sessionCounter]</key>
                            <history>7d</history>
                            <username>{$TOMCAT.USER}</username>
                            <password>{$TOMCAT.PASSWORD}</password>
                            <description>Rate of sessions created by this application per second.</description>
                            <preprocessing>
                                <step>
                                    <type>CHANGE_PER_SECOND</type>
                                    <parameters>
                                        <parameter/>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>context</value>
                                </tag>
                                <tag>
                                    <tag>jmx-context</tag>
                                    <value>{#JMXCONTEXT}</value>
                                </tag>
                                <tag>
                                    <tag>jmx-host</tag>
                                    <value>{#JMXHOST}</value>
                                </tag>
                            </tags>
                        </item_prototype>
                    </item_prototypes>
                    <graph_prototypes>
                        <graph_prototype>
                            <uuid>dfd46f5443f9438fb21ae23dfd4010c0</uuid>
                            <name>{#JMXHOST}{#JMXCONTEXT}: Sessions</name>
                            <graph_items>
                                <graph_item>
                                    <drawtype>GRADIENT_LINE</drawtype>
                                    <color>199C0D</color>
                                    <item>
                                        <host>Apache Tomcat by JMX</host>
                                        <key>jmx[{#JMXOBJ},maxActive]</key>
                                    </item>
                                </graph_item>
                                <graph_item>
                                    <sortorder>1</sortorder>
                                    <drawtype>GRADIENT_LINE</drawtype>
                                    <color>F63100</color>
                                    <item>
                                        <host>Apache Tomcat by JMX</host>
                                        <key>jmx[{#JMXOBJ},activeSessions]</key>
                                    </item>
                                </graph_item>
                                <graph_item>
                                    <sortorder>2</sortorder>
                                    <drawtype>GRADIENT_LINE</drawtype>
                                    <color>00611C</color>
                                    <item>
                                        <host>Apache Tomcat by JMX</host>
                                        <key>jmx[{#JMXOBJ},rejectedSessions]</key>
                                    </item>
                                </graph_item>
                                <graph_item>
                                    <sortorder>3</sortorder>
                                    <drawtype>GRADIENT_LINE</drawtype>
                                    <color>F7941D</color>
                                    <item>
                                        <host>Apache Tomcat by JMX</host>
                                        <key>jmx[{#JMXOBJ},maxActiveSessions]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                    </graph_prototypes>
                    <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                </discovery_rule>
                <discovery_rule>
                    <uuid>05752834671f416fb2fdac1006308c3e</uuid>
                    <name>Thread pools discovery</name>
                    <type>JMX</type>
                    <key>jmx.discovery[beans,&quot;Catalina:type=ThreadPool,name=*&quot;]</key>
                    <delay>1h</delay>
                    <username>{$TOMCAT.USER}</username>
                    <password>{$TOMCAT.PASSWORD}</password>
                    <filter>
                        <evaltype>AND</evaltype>
                        <conditions>
                            <condition>
                                <macro>{#JMXNAME}</macro>
                                <value>{$TOMCAT.LLD.FILTER.MATCHES:&quot;ThreadPool&quot;}</value>
                                <formulaid>A</formulaid>
                            </condition>
                            <condition>
                                <macro>{#JMXNAME}</macro>
                                <value>{$TOMCAT.LLD.FILTER.NOT_MATCHES:&quot;ThreadPool&quot;}</value>
                                <operator>NOT_MATCHES_REGEX</operator>
                                <formulaid>B</formulaid>
                            </condition>
                        </conditions>
                    </filter>
                    <description>Discovery for ThreadPool</description>
                    <item_prototypes>
                        <item_prototype>
                            <uuid>7d7418c72ced48eca2a92e30021b611b</uuid>
                            <name>{#JMXNAME}: Threads count</name>
                            <type>JMX</type>
                            <key>jmx[{#JMXOBJ},currentThreadCount]</key>
                            <history>7d</history>
                            <username>{$TOMCAT.USER}</username>
                            <password>{$TOMCAT.PASSWORD}</password>
                            <description>Amount of threads the thread pool has right now, both busy and free.</description>
                            <preprocessing>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <parameters>
                                        <parameter>10m</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>thread-pool</value>
                                </tag>
                                <tag>
                                    <tag>jmx-name</tag>
                                    <value>{#JMXNAME}</value>
                                </tag>
                                <tag>
                                    <tag>jmx-type</tag>
                                    <value>{#JMXTYPE}</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>35b1e99fbc44448083b5aad0ce1239a1</uuid>
                            <name>{#JMXNAME}: Threads busy</name>
                            <type>JMX</type>
                            <key>jmx[{#JMXOBJ},currentThreadsBusy]</key>
                            <history>7d</history>
                            <username>{$TOMCAT.USER}</username>
                            <password>{$TOMCAT.PASSWORD}</password>
                            <description>Number of the requests that are being currently handled.</description>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>thread-pool</value>
                                </tag>
                                <tag>
                                    <tag>jmx-name</tag>
                                    <value>{#JMXNAME}</value>
                                </tag>
                                <tag>
                                    <tag>jmx-type</tag>
                                    <value>{#JMXTYPE}</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>32e316ce567c4f94aecb89d9763e4d27</uuid>
                            <name>{#JMXNAME}: Threads limit</name>
                            <type>JMX</type>
                            <key>jmx[{#JMXOBJ},maxThreads]</key>
                            <history>7d</history>
                            <username>{$TOMCAT.USER}</username>
                            <password>{$TOMCAT.PASSWORD}</password>
                            <description>Limit of the threads count. When currentThreadsBusy counter reaches the maxThreads limit, no more requests could be handled, and the application chokes.</description>
                            <preprocessing>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <parameters>
                                        <parameter>10m</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>thread-pool</value>
                                </tag>
                                <tag>
                                    <tag>jmx-name</tag>
                                    <value>{#JMXNAME}</value>
                                </tag>
                                <tag>
                                    <tag>jmx-type</tag>
                                    <value>{#JMXTYPE}</value>
                                </tag>
                            </tags>
                        </item_prototype>
                    </item_prototypes>
                    <trigger_prototypes>
                        <trigger_prototype>
                            <uuid>7a15296553a447f6aebf4958631b6704</uuid>
                            <expression>min(/Apache Tomcat by JMX/jmx[{#JMXOBJ},currentThreadsBusy],{$TOMCAT.THREADS.MAX.TIME:&quot;{#JMXNAME}&quot;})&gt;last(/Apache Tomcat by JMX/jmx[{#JMXOBJ},maxThreads])*{$TOMCAT.THREADS.MAX.PCT:&quot;{#JMXNAME}&quot;}/100</expression>
                            <name>{#JMXNAME}: Busy worker threads count is high</name>
                            <event_name>{#JMXNAME}: Busy worker threads count are more than {$TOMCAT.THREADS.MAX.PCT:&quot;{#JMXNAME}&quot;}% of the limit for {$TOMCAT.THREADS.MAX.TIME:&quot;{#JMXNAME}&quot;}</event_name>
                            <priority>HIGH</priority>
                            <description>When current threads busy counter reaches the limit, no more requests could be handled, and the application chokes.</description>
                            <tags>
                                <tag>
                                    <tag>scope</tag>
                                    <value>notice</value>
                                </tag>
                            </tags>
                        </trigger_prototype>
                    </trigger_prototypes>
                    <graph_prototypes>
                        <graph_prototype>
                            <uuid>d8236335204a42488c6221c8b2d31e77</uuid>
                            <name>{#JMXNAME}: Worker threads</name>
                            <graph_items>
                                <graph_item>
                                    <drawtype>GRADIENT_LINE</drawtype>
                                    <color>199C0D</color>
                                    <item>
                                        <host>Apache Tomcat by JMX</host>
                                        <key>jmx[{#JMXOBJ},maxThreads]</key>
                                    </item>
                                </graph_item>
                                <graph_item>
                                    <sortorder>1</sortorder>
                                    <drawtype>GRADIENT_LINE</drawtype>
                                    <color>F63100</color>
                                    <item>
                                        <host>Apache Tomcat by JMX</host>
                                        <key>jmx[{#JMXOBJ},currentThreadCount]</key>
                                    </item>
                                </graph_item>
                                <graph_item>
                                    <sortorder>2</sortorder>
                                    <drawtype>GRADIENT_LINE</drawtype>
                                    <color>00611C</color>
                                    <item>
                                        <host>Apache Tomcat by JMX</host>
                                        <key>jmx[{#JMXOBJ},currentThreadsBusy]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                    </graph_prototypes>
                    <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                </discovery_rule>
            </discovery_rules>
            <tags>
                <tag>
                    <tag>class</tag>
                    <value>software</value>
                </tag>
                <tag>
                    <tag>target</tag>
                    <value>tomcat</value>
                </tag>
            </tags>
            <macros>
                <macro>
                    <macro>{$TOMCAT.LLD.FILTER.MATCHES}</macro>
                    <value>.*</value>
                    <description>Filter for discoverable objects. Can be used with following contexts: &quot;GlobalRequestProcessor&quot;, &quot;ThreadPool&quot;, &quot;Manager&quot;</description>
                </macro>
                <macro>
                    <macro>{$TOMCAT.LLD.FILTER.NOT_MATCHES}</macro>
                    <value>CHANGE IF NEEDED</value>
                    <description>Filter to exclude discovered objects. Can be used with following contexts: &quot;GlobalRequestProcessor&quot;, &quot;ThreadPool&quot;, &quot;Manager&quot;</description>
                </macro>
                <macro>
                    <macro>{$TOMCAT.PASSWORD}</macro>
                    <description>Password for JMX</description>
                </macro>
                <macro>
                    <macro>{$TOMCAT.THREADS.MAX.PCT}</macro>
                    <value>75</value>
                    <description>Threshold for busy worker threads trigger. Can be used with {#JMXNAME} as context.</description>
                </macro>
                <macro>
                    <macro>{$TOMCAT.THREADS.MAX.TIME}</macro>
                    <value>5m</value>
                    <description>The time during which the number of busy threads can exceed the threshold. Can be used with {#JMXNAME} as context.</description>
                </macro>
                <macro>
                    <macro>{$TOMCAT.USER}</macro>
                    <description>User for JMX</description>
                </macro>
            </macros>
            <dashboards>
                <dashboard>
                    <uuid>330fa4902aed4d45b8747ddb2c8c7d70</uuid>
                    <name>Tomcat: Overview</name>
                    <pages>
                        <page>
                            <name>General</name>
                            <widgets>
                                <widget>
                                    <type>graphprototype</type>
                                    <width>12</width>
                                    <height>15</height>
                                    <fields>
                                        <field>
                                            <type>INTEGER</type>
                                            <name>columns</name>
                                            <value>1</value>
                                        </field>
                                        <field>
                                            <type>GRAPH_PROTOTYPE</type>
                                            <name>graphid</name>
                                            <value>
                                                <host>Apache Tomcat by JMX</host>
                                                <name>{#JMXHOST}{#JMXCONTEXT}: Sessions</name>
                                            </value>
                                        </field>
                                        <field>
                                            <type>INTEGER</type>
                                            <name>rows</name>
                                            <value>3</value>
                                        </field>
                                    </fields>
                                </widget>
                                <widget>
                                    <type>graphprototype</type>
                                    <x>12</x>
                                    <width>12</width>
                                    <height>15</height>
                                    <fields>
                                        <field>
                                            <type>INTEGER</type>
                                            <name>columns</name>
                                            <value>1</value>
                                        </field>
                                        <field>
                                            <type>GRAPH_PROTOTYPE</type>
                                            <name>graphid</name>
                                            <value>
                                                <host>Apache Tomcat by JMX</host>
                                                <name>{#JMXNAME}: Worker threads</name>
                                            </value>
                                        </field>
                                        <field>
                                            <type>INTEGER</type>
                                            <name>rows</name>
                                            <value>3</value>
                                        </field>
                                    </fields>
                                </widget>
                            </widgets>
                        </page>
                    </pages>
                </dashboard>
            </dashboards>
        </template>
    </templates>
</zabbix_export>